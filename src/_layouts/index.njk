<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <meta name="description" content={{ description }}>
    <meta name="keywords" content={{ keywords }}>
    <link rel="icon" type="image/png" href="/favicon.png">
    <script src="{{'/assets/js/bundle.js' | url}}"></script>
    <style type="text/css">
      body {
        margin: 0;
        padding: 0;
        {# font-family: monospace; #}
        letter-spacing: .1px;
        {# font-family: system-ui; #}
        {# background-color: #f0f0e6; #}
        {# font-family: sans-serif;
        font-weight: 100;
        letter-spacing: 1.15px; #}
        {# margin: 0;
        text-align: center;
        width: 100%; #}
      }
      
      body p {
        line-height: 19px;
      }

      .introduction p{
        margin: 10px;
      }

      .midi-archive-collection {
        {# .broider { #}
        border-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAAnRJREFUeF7tm8FyAyEMQ8n/f3QzvXRm2XS1QsIhQb3aGHgIbNj00Vr7afljCDw65wO/X2OAMjhbC1COF/QOUIiIc4BAuXD7efdHYoCKGghQEWDfPEDfDbS6bLo8g8wwRsKh8cEzNECP2AN0RIYXbQJ0daD9CqnjpbJkO1/t1P5Re3V88C4foMcloIC/ehwJ0ABFu/rSTinwxZFEb3m2rJKyJBqwhO5eY2n8d7Z8gBJ1aoCeVRuF3tvJt73KgUod3jgj3VXGbZL/OFJJa2TLB+hFWRWgWL9RKGZEeXw8UGq2b3Cm30Orz0i2zn0Dw0OXAWpegQDdDah5vuXh5McR9xlbTsDcYYAGqJmAOdx2CnWXZctnebNgTuEC1Ew4QAOU+ESw4Hd3tH4f9ziCJqTaERAUH7XfPsuzXwQCtJMcAhKFIgIkUAScsq/wCYTkQ7tTQAY+IuYMnangKPT8n4TSa5oDKNqDaMuh9qod9W+1B2gUSgvWqkCUtKLQBRRKS6RrwN5U1P6WV6g6wQBVCUahRwKzH2jN6wVf7KU605GUZk94dvzlztDZE54dP0DNhAP024G6k5KZ1ync1KTjSEoBelwz+w8dZitMjR+FqgTBxWG5pIQGZOZBh0PjK7VXvDbRhMgGpcBmJKXqxw3EN0ARIdL+dUCry6rZWRytp71sQhNCA1LtqH/VjsYXoGRZFaAkMKTg5YBWVwFqUkIAkb38pzhoQKo9QFWCXfsADVDi+coMayScmnRG+vxr47jLVxf2aMIBigiR9gAlgSH3jweKJriV3XGGbgUMTTZAESHSHqAkMOQ+AhTF3NoeoOblD9AANRMwh3sCUQHAFEF2KngAAAAASUVORK5CYII=") 28 /  28px / 0 round;
        border-width: 28px;
        border-style: solid;
        padding: 20px;
        margin: 0 0 40px;
      }

      .midi-archive-collection-header {
        text-align: center;
      }

      .midi-archive-collection-items {
        display: flex;
        flex-direction: row;
        justify-content: space-between; /* Aligns items along the horizontal line */
        align-items: center; /* Aligns items along the vertical line */
        flex-wrap: wrap; /* Allows the items to wrap onto multiple lines */
        gap: 10px; 
        padding: 0;
      }
      .midi-archive-collection-item {
        list-style: none;
        padding: 10px;
        position: relative
      }
      .midi-archive-collection-item.playing {
        border: 1px solid red;
      }
      {# this element is going to prevent .midi files from being downloaded on click #}
      .midi-archive-collection-item-surface {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        z-index: 1;
      }

      .midi-archive-collection-item-surface:hover {
        cursor: grab;
      }

      .container {
        box-sizing: border-box;
        position: absolute;
        height: calc(100vh - 100px);
        overflow-y: scroll;
        padding: 10px;
      }
      .midi-player {
        height: 100px;
        position: fixed;
        bottom: 0;
        width: 100%;
        text-align: center;
        border-top: dotted 2px;
        padding-top: 10px;
        box-sizing: border-box;
      }

      .hidden {
        display: none;
      }

      {# collection-specific styling #}
      .midi-archive-collection.sankey .midi-archive-collection-items {
        background-image: url(/midi-archive/assets/sankey/images/background.gif);
      }
      .midi-archive-collection.sankey .midi-file {
        color: white
      }
    </style>
  </head>
  <body background="{{'/assets/prairiefrontier/images/embossbkgd1.jpg' | url}}" link="Navy" text="Black">
    <div class="container">
      <section class="introduction">
        {{ content | safe }}
      </section>
      <section class="midi-archive">
        {% set totalMidiCount = 0 %}
        {% for site, data in collections.midiAssets %}
          {% set totalMidiCount = totalMidiCount + data.midis.length %}
        {% endfor %}
        <h3>There are currently {{ totalMidiCount }} MIDI files in the collection!</h3>
        <li class="midi-archive-collection-item">
          <div class="midi-archive-collection-item-surface"></div>
          <a href="https://midi-archive.s3.us-east-2.amazonaws.com/neural-net/model-prediction.mid">In addition to browsing the archive below, click here to listen to music produced by the neural net model. This music is generated daily at noon (GMT), so check back again later!</a>
        </li>
        <p>Table of contents for the archive:</p>
        <ul>
          {% for site, data in collections.midiAssets %}
            <li>
              <a href="#{{site}}">{{data.name}}</a>
            </li>
          {% endfor %}
        </ul>

        {% for site, data in collections.midiAssets %}
          <div class="midi-archive-collection {{ site }}">
            {# <h3 id="#{{ site }}"><a href="#{{ site }}">{{ data.name}}</a></h3> #}
            <h3 class="midi-archive-collection-header" id="{{ site }}"><a href={{ data.homepage }} target="_blank">{{ data.name}}</a></h3>
            {% set descriptionSource = ["./src/_includes/", site, ".md"] | join %}
            {% renderFile descriptionSource %}
            {# <span class="dropdown">â‡©</span> #}
            {# <p>{{ data.description }}</p> #}
            <ul class="midi-archive-collection-items">
              {% for asset in data.midis %}
                <li class="midi-archive-collection-item">
                  <div class="midi-archive-collection-item-surface"></div>
                  <a class="midi-file" href="{{ asset | url }}">{{ asset.split('/midi/')[1] }}</a>
                </li>
              {% endfor %}
            </ul>
          </div>
        {% endfor %}
      </section>
    </div>
    <div class="midi-player">
      {# <marquee><p>To listen, click any .mid file above!</p></marquee> #}
      <div class="midi-player-status">
        <p class="status"></p>
        {# <p class="current-time">Current Time: <span class="current-time-text">0</span></p> #}
        {# <p class="total-time">Total Time: <span class="total-time-text">0</span></p> #}
      </div>
      <div class="midi-player-controls">
        <button class="play-button">Play</button>
        <button class="stop-button hidden">Pause</button>
        <button class="random-button">Random</button>
      </div>
    </div>
  </body>
</html>